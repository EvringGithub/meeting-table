"use strict";wf.define("meeting",[],function(){return(()=>{var n=(n,t,i)=>{$.post(n,t,n=>{$.isFunction(i)&&i(n)})};return{save:(t,i)=>{n("meeting/save",t,i)},remove:(t,i)=>{n("meeting/delete",{id:t},i)}}})()});wf.define("meetingCard",[],function(){var n=wf.require("meeting"),t=wf.require("meetingTime");return function(i,r,u){var c=r.find(".meeting-save"),l=r.find(".meeting-delete"),a=r.find(".meeting-startTime"),v=r.find(".meeting-endTime"),s="meeting-saved",h="meeting-edit",e="meeting-editing",o=".meeting-list-wrapper",f=n=>r.find('[name="{0}"]'.format(n)),y=function(){var n={},i={date:u},t;if(["id","title","userName","tableRoom","startTime","endTime"].forEach(t=>{n[t]=f(t)}),!n.title.val())return n.title.focus(),null;if(!n.userName.val())return n.userName.focus(),null;for(t in n)i[t]=n[t].val();return i};return a.find(".time-option").html(t.render(u,f("startTime").val())),v.find(".time-option").html(t.render(u,f("endTime").val())),c.click(function(){var t=y();t&&n.save(t,n=>{n.success&&(t.id||f("id").val(n.id),c.parent().parent().addClass(s),r.closest(o).removeClass(e))})}),l.click(function(){var t=f("id").val(),i=function(){r.closest(o).removeClass(e);r.remove()};t?n.remove(t,n=>{n.success&&i()}):i()}),r.hover(function(){$(this).hasClass(s)&&$(this).find("."+h).show()},function(){$(this).find("."+h).hide()}),r.find("."+h+" .wf-btn").click(function(){r.removeClass(s).closest(o).addClass(e);$(this).parent().hide()}),{addTo:function(n){n.append(r);r.closest(o).addClass(e)}}}});wf.require("page").render("meetingBorad",["UI.Select"],function(){var n=this,t="meeting-temp",i=wf.require("meetingCard"),r=$("."+t).remove().removeClass(t),u;r.find("[data-rendered]").removeAttr("data-rendered");$(".meeting-add").click(function(){var t=$(this),u=r.clone(),f=t.prev().find(".meeting-date").html(),e=i(t,u,f);e.addTo(t.prev());n.refresh()});u=$(".meeting-board-wrapper").find(".meeting-card");$.each(u,function(){i("",$(this),$(this).parent().find(".meeting-date").html())});n.refresh()});