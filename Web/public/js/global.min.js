"use strict";wf.define("timeList",[],function(){return function(){var r=8,t=17,n=10,i='<li data-value="{0}" class="wf-select-option">{1}<\/li>',u=function(){var n=":";return{toTime:t=>{var i=t%60;return Math.floor(t/60)+n+(i<10?"0"+i:i)},toMinutes:t=>{var i=t.split(n);return parseInt(i[0])*60+parseInt(i[1])}}}();return{render:function(f){var h=[],o=new Date,c=o.getHours(),l=o.getMinutes(),e,s;if(c>=t)return i.format("","下班");for(e=o.format("yyyy-MM-dd")==f?c*60+Math.ceil(l/n)*n:r*60;e<t*60;e=e+n)s=u.toTime(e),h.push(i.format(s,s));return h.join("")}}}()});wf.define("meeting",[],function(){return(()=>{var n=(n,t,i)=>{$.post(n,t,n=>{$.isFunction(i)&&i(n)})};return{save:(t,i)=>{n("meeting/save",t,i)},remove:(t,i)=>{n("meeting/delete",{id:t},i)}}})()});wf.define("meetingCard",[],function(){var n=wf.require("meeting"),t=wf.require("timeList");return function(i,r,u){var e=r.find(".meeting-save"),o=r.find(".meeting-delete"),s=r.find(".meeting-startTime"),h=r.find(".meeting-endTime"),f=n=>r.find('[name="{0}"]'.format(n)),c=function(){var n={},i={date:u},t;if(["id","title","userName","tableRoom","startTime","endTime"].forEach(t=>{n[t]=f(t)}),!n.title.val())return n.title.focus(),null;if(!n.userName.val())return n.userName.focus(),null;for(t in n)i[t]=n[t].val();return i};return s.find(".time-option").html(t.render(u)),h.find(".time-option").html(t.render(u)),e.click(function(){var t=c();t&&n.save(t,n=>{n.success&&f("id").val(n.id)})}),o.click(function(){var t=f("id").val(),u=function(){r.remove();i.show()};t?n.remove(t,n=>{n.success&&u()}):u()}),{addTo:function(n){i.hide();n.append(r)}}}});wf.require("page").render("meetingBorad",["UI.Select"],function(){var t=this,n="meeting-temp",i=wf.require("meetingCard"),r=$("."+n).remove().removeClass(n);$(".meeting-add").click(function(){var n=$(this),u=r.clone(),f=n.prev().find(".meeting-date").html(),e=i(n,u,f);e.addTo(n.prev());t.refresh()})});